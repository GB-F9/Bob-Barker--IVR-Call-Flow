<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Five9 IVR Call Flow - Finance & Customer Service</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #0066cc;
        }
        
        .header h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 14px;
        }
        
        .flows-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        .flow-column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .flow-title-header {
            background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
            color: white;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 30px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }
        
        .flow-title-header.finance {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
        }
        
        svg {
            max-width: 100%;
            height: auto;
        }
        
        /* Flowchart element styles */
        .start-end {
            fill: #c9302c;
            stroke: #a02622;
            stroke-width: 2;
        }
        
        .process-teal {
            fill: #5bc0de;
            stroke: #46b8da;
            stroke-width: 2;
        }
        
        .process-green {
            fill: #5cb85c;
            stroke: #4cae4c;
            stroke-width: 2;
        }
        
        .process-beige {
            fill: #f5deb3;
            stroke: #d4b896;
            stroke-width: 2;
        }
        
        .process-pink {
            fill: #f8d7da;
            stroke: #f5c6cb;
            stroke-width: 2;
        }
        
        .process-purple {
            fill: #e1bee7;
            stroke: #ce93d8;
            stroke-width: 2;
        }
        
        .decision {
            fill: #367588;
            stroke: #2a5b6b;
            stroke-width: 2;
        }
        
        .connector-line {
            stroke: #555;
            stroke-width: 2;
            fill: none;
        }
        
        .arrow {
            fill: #555;
        }
        
        .label-text {
            font-family: Arial, sans-serif;
            font-size: 13px;
            fill: #333;
            text-anchor: middle;
        }
        
        .label-text-white {
            font-family: Arial, sans-serif;
            font-size: 13px;
            fill: white;
            text-anchor: middle;
        }
        
        .label-text-small {
            font-family: Arial, sans-serif;
            font-size: 11px;
            fill: #333;
            text-anchor: middle;
        }
        
        .callout {
            fill: #d1ecf1;
            stroke: #bee5eb;
            stroke-width: 2;
        }
        
        .decision-label {
            font-family: Arial, sans-serif;
            font-size: 11px;
            fill: #555;
            font-weight: bold;
        }
        
        /* Interactive Elements */
        .clickable {
            cursor: pointer;
            transition: opacity 0.2s, filter 0.2s;
        }
        
        .clickable:hover {
            opacity: 0.8;
            filter: brightness(1.1);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 0;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 600px;
            animation: slideIn 0.3s;
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
            color: white;
            padding: 20px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 22px;
        }
        
        .close {
            color: white;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
            transition: transform 0.2s;
        }
        
        .close:hover {
            transform: scale(1.2);
        }
        
        .modal-body {
            padding: 25px;
            line-height: 1.6;
            color: #333;
        }
        
        .modal-body p {
            margin: 10px 0;
        }
        
        .modal-body ul {
            margin: 10px 0;
            padding-left: 25px;
        }
        
        .modal-body li {
            margin: 8px 0;
        }
        
        .info-badge {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 14px;
        }
        
        @media print {
            body { background: white; }
            .container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Five9 IVR Call Flow Diagram</h1>
            <p>Finance & Customer Service Lines - Eastern Time Zone</p>
            <p style="margin-top: 8px; font-weight: bold;">Document for Customer Sign-Off</p>
            <div style="background: #e3f2fd; border: 2px solid #2196f3; border-radius: 6px; padding: 12px; margin-top: 15px; color: #0d47a1;">
                <strong>ðŸ’¡ Interactive Diagram:</strong> Click on any module (box, diamond, or oval) to view detailed information about its function.
            </div>
        </div>
        
        <div class="flows-wrapper">
            <!-- FINANCE FLOW -->
            <div class="flow-column">
                <div class="flow-title-header finance">FINANCE LINE</div>
                
                <svg width="950" height="2300" viewBox="0 0 1000 2300">
                    <!-- Start -->
                    <ellipse class="start-end clickable" cx="450" cy="40" rx="100" ry="30"/>
                    <text class="label-text-white" x="450" y="48">Incoming Call - Finance</text>
                    
                    <!-- Connector -->
                    <line class="connector-line" x1="450" y1="70" x2="450" y2="120"/>
                    <polygon class="arrow" points="450,120 445,110 455,110"/>
                    
                    <!-- Emergency Broadcast Check -->
                    <rect class="process-teal clickable" x="350" y="120" width="200" height="60" rx="8"/>
                    <text class="label-text" x="450" y="145">Emergency Broadcast</text>
                    <text class="label-text" x="450" y="162">Rules: PIN-enabled</text>
                    <text class="label-text-small" x="450" y="175">(on/off toggle)</text>
                    
                    <!-- Connector -->
                    <line class="connector-line" x1="450" y1="180" x2="450" y2="230"/>
                    <polygon class="arrow" points="450,230 445,220 455,220"/>
                    
                    <!-- Side note for broadcast -->
                    <path class="callout" d="M 570 135 L 720 135 L 720 175 L 580 175 L 570 155 Z"/>
                    <text class="label-text-small" x="645" y="150">Checks for Emergency</text>
                    <text class="label-text-small" x="645" y="165">Broadcast ON/OFF</text>
                    
                    <!-- Holiday Check Decision -->
                    <polygon class="decision clickable" points="450,230 540,285 450,340 360,285"/>
                    <text class="label-text-white" x="450" y="280">Holiday?</text>
                    <text class="label-text-white" x="450" y="295">(Configured)</text>
                    
                    <!-- Yes path to Holiday Greeting - Route FAR LEFT -->
                    <line class="connector-line" x1="360" y1="285" x2="180" y2="285"/>
                    <text class="decision-label" x="270" y="280">Yes</text>
                    <line class="connector-line" x1="180" y1="285" x2="180" y2="390"/>
                    <polygon class="arrow" points="180,390 175,380 185,380"/>
                    
                    <rect class="process-beige clickable" x="80" y="390" width="200" height="70" rx="8"/>
                    <text class="label-text" x="180" y="415">Thank you for calling.</text>
                    <text class="label-text" x="180" y="432">Holiday Message.</text>
                    <text class="label-text-small" x="180" y="448">Please try back on [next date]</text>
                    
                    <line class="connector-line" x1="180" y1="460" x2="180" y2="520"/>
                    <polygon class="arrow" points="180,520 175,510 185,510"/>
                    
                    <rect class="process-pink clickable" x="80" y="520" width="200" height="60" rx="8"/>
                    <text class="label-text" x="180" y="545">Voicemail Queue</text>
                    <text class="label-text-small" x="180" y="562">(Broadcast voicemail)</text>
                    
                    <!-- Route down LEFT edge at x=30 to avoid all modules -->
                    <line class="connector-line" x1="180" y1="580" x2="180" y2="630"/>
                    <line class="connector-line" x1="180" y1="630" x2="30" y2="630"/>
                    <line class="connector-line" x1="30" y1="630" x2="30" y2="2100"/>
                    <line class="connector-line" x1="30" y1="2100" x2="450" y2="2100"/>
                    
                    <!-- No path from Holiday - Route FAR RIGHT -->
                    <line class="connector-line" x1="540" y1="285" x2="720" y2="285"/>
                    <text class="decision-label" x="630" y="280">No</text>
                    <line class="connector-line" x1="720" y1="285" x2="720" y2="390"/>
                    <polygon class="arrow" points="720,390 715,380 725,380"/>
                    
                    <!-- Temp Close Check -->
                    <polygon class="decision clickable" points="720,390 810,445 720,500 630,445"/>
                    <text class="label-text-white" x="720" y="440">Temp</text>
                    <text class="label-text-white" x="720" y="455">Close?</text>
                    
                    <!-- Yes path -->
                    <line class="connector-line" x1="720" y1="500" x2="720" y2="560"/>
                    <text class="decision-label" x="730" y="530">Yes</text>
                    <polygon class="arrow" points="720,560 715,550 725,550"/>
                    
                    <rect class="process-beige clickable" x="620" y="560" width="200" height="70" rx="8"/>
                    <text class="label-text" x="720" y="585">Play Temporary</text>
                    <text class="label-text" x="720" y="602">Close Message</text>
                    <text class="label-text-small" x="720" y="618">(Company meetings, etc.)</text>
                    
                    <!-- Route down FAR RIGHT edge at x=870 -->
                    <line class="connector-line" x1="720" y1="630" x2="720" y2="680"/>
                    <line class="connector-line" x1="720" y1="680" x2="870" y2="680"/>
                    <line class="connector-line" x1="870" y1="680" x2="870" y2="2110"/>
                    <line class="connector-line" x1="870" y1="2110" x2="450" y2="2110"/>
                    
                    <!-- No path - continue CENTER -->
                    <line class="connector-line" x1="630" y1="445" x2="450" y2="445"/>
                    <text class="decision-label" x="540" y="440">No</text>
                    <line class="connector-line" x1="450" y1="445" x2="450" y2="730"/>
                    <polygon class="arrow" points="450,730 445,720 455,720"/>
                    
                    <!-- Business Hours Check -->
                    <polygon class="decision clickable" points="450,730 540,785 450,840 360,785"/>
                    <text class="label-text-white" x="450" y="780">8 AM - 5 PM</text>
                    <text class="label-text-white" x="450" y="795">Eastern?</text>
                    
                    <!-- Yes path to Queue - CENTER -->
                    <line class="connector-line" x1="450" y1="840" x2="450" y2="900"/>
                    <text class="decision-label" x="460" y="870">Yes</text>
                    <polygon class="arrow" points="450,900 445,890 455,890"/>
                    
                    <rect class="process-teal clickable" x="350" y="900" width="200" height="90" rx="8"/>
                    <text class="label-text" x="450" y="930">Finance Queue</text>
                    <text class="label-text-small" x="450" y="950">â€¢ Music on hold (18 sec)</text>
                    <text class="label-text-small" x="450" y="965">â€¢ Periodic announcements</text>
                    <text class="label-text-small" x="450" y="980">â€¢ Press 1 for voicemail</text>
                    
                    <line class="connector-line" x1="450" y1="990" x2="450" y2="1050"/>
                    <polygon class="arrow" points="450,1050 445,1040 455,1040"/>
                    
                    <!-- NetSuite Lookup Process - CENTER -->
                    <rect class="process-green clickable" x="340" y="1050" width="220" height="80" rx="8"/>
                    <text class="label-text" x="450" y="1078" style="font-weight: bold;">NetSuite ANI Lookup</text>
                    <text class="label-text-small" x="450" y="1097">Search caller phone number in</text>
                    <text class="label-text-small" x="450" y="1112">Customer & Contact records</text>
                    
                    <line class="connector-line" x1="450" y1="1130" x2="450" y2="1190"/>
                    <polygon class="arrow" points="450,1190 445,1180 455,1180"/>
                    
                    <!-- NetSuite Match Decision - CENTER -->
                    <polygon class="decision clickable" points="450,1190 540,1245 450,1300 360,1245"/>
                    <text class="label-text-white" x="450" y="1240">Single</text>
                    <text class="label-text-white" x="450" y="1255">Match?</text>
                    
                    <!-- Yes - Auto Pop - CENTER -->
                    <line class="connector-line" x1="450" y1="1300" x2="450" y2="1360"/>
                    <text class="decision-label" x="460" y="1330">Yes</text>
                    <polygon class="arrow" points="450,1360 445,1350 455,1350"/>
                    
                    <rect class="process-green clickable" x="350" y="1360" width="200" height="60" rx="8"/>
                    <text class="label-text" x="450" y="1385">Auto-pop customer</text>
                    <text class="label-text" x="450" y="1402">record in NetSuite</text>
                    
                    <line class="connector-line" x1="450" y1="1420" x2="450" y2="1480"/>
                    <polygon class="arrow" points="450,1480 445,1470 455,1470"/>
                    
                    <!-- No - Show Hyperlinks - Route RIGHT then back -->
                    <line class="connector-line" x1="540" y1="1245" x2="680" y2="1245"/>
                    <text class="decision-label" x="610" y="1240">No</text>
                    <line class="connector-line" x1="680" y1="1245" x2="680" y2="1360"/>
                    <polygon class="arrow" points="680,1360 675,1350 685,1350"/>
                    
                    <rect class="process-beige clickable" x="580" y="1360" width="200" height="70" rx="8"/>
                    <text class="label-text-small" x="680" y="1385">Display hyperlink list</text>
                    <text class="label-text-small" x="680" y="1402">of matching records</text>
                    <text class="label-text-small" x="680" y="1418">(Agent selects correct one)</text>
                    
                    <line class="connector-line" x1="680" y1="1430" x2="680" y2="1480"/>
                    <line class="connector-line" x1="680" y1="1480" x2="450" y2="1480"/>
                    
                    <!-- Agent Connection - CENTER -->
                    <ellipse class="process-purple clickable" cx="450" cy="1540" rx="130" ry="40"/>
                    <text class="label-text" x="450" y="1538">Connect to Finance Agent</text>
                    <text class="label-text-small" x="450" y="1555">Five9 Adapter Active</text>
                    
                    <line class="connector-line" x1="450" y1="1580" x2="450" y2="1640"/>
                    <polygon class="arrow" points="450,1640 445,1630 455,1630"/>
                    
                    <!-- Call Logging - CENTER -->
                    <rect class="process-teal clickable" x="340" y="1640" width="220" height="100" rx="8"/>
                    <text class="label-text" x="450" y="1668" style="font-weight: bold;">Log Phone Call Activity</text>
                    <text class="label-text" x="450" y="1688">to NetSuite</text>
                    <text class="label-text-small" x="450" y="1708">â€¢ Agent, duration, ACW time</text>
                    <text class="label-text-small" x="450" y="1723">â€¢ Disposition code</text>
                    <text class="label-text-small" x="450" y="1738">â€¢ Transcript & AI summary</text>
                    
                    <line class="connector-line" x1="450" y1="1740" x2="450" y2="2100"/>
                    
                    <!-- No path from Hours - After Hours - Route LEFT -->
                    <line class="connector-line" x1="360" y1="785" x2="180" y2="785"/>
                    <text class="decision-label" x="270" y="780">No</text>
                    <line class="connector-line" x1="180" y1="785" x2="180" y2="900"/>
                    <polygon class="arrow" points="180,900 175,890 185,890"/>
                    
                    <rect class="process-beige clickable" x="80" y="900" width="200" height="70" rx="8"/>
                    <text class="label-text" x="180" y="925">Play Night Message</text>
                    <text class="label-text-small" x="180" y="945">Thank you for calling.</text>
                    <text class="label-text-small" x="180" y="960">Business hours: 8am-5pm ET</text>
                    
                    <line class="connector-line" x1="180" y1="970" x2="180" y2="1040"/>
                    <polygon class="arrow" points="180,1040 175,1030 185,1030"/>
                    
                    <rect class="process-pink clickable" x="80" y="1040" width="200" height="60" rx="8"/>
                    <text class="label-text" x="180" y="1065">Voicemail Queue</text>
                    <text class="label-text-small" x="180" y="1082">(Press 1 option)</text>
                    
                    <!-- Route to LEFT edge -->
                    <line class="connector-line" x1="180" y1="1100" x2="180" y2="1150"/>
                    <line class="connector-line" x1="180" y1="1150" x2="30" y2="1150"/>
                    <line class="connector-line" x1="30" y1="1150" x2="30" y2="2100"/>
                    
                    <!-- End -->
                    <ellipse class="start-end" cx="450" cy="2150" rx="80" ry="30"/>
                    <text class="label-text-white" x="450" y="2158">Finish</text>
                    
                    <!-- Holiday Note -->
                    <rect class="callout" x="80" y="1830" width="740" height="110" rx="8"/>
                    <text class="label-text" x="450" y="1858" style="font-weight: bold;">Configured Holidays:</text>
                    <text class="label-text-small" x="450" y="1878">New Year's Day, Martin Luther King Jr. Day, Good Friday,</text>
                    <text class="label-text-small" x="450" y="1893">Memorial Day, Independence Day, Labor Day, Thanksgiving,</text>
                    <text class="label-text-small" x="450" y="1908">Day After Thanksgiving, Christmas Eve, Christmas Day</text>
                    <text class="label-text-small" x="450" y="1923">(Additional holidays configurable in Five9)</text>
                </svg>
            </div>
            
            <!-- CUSTOMER SERVICE FLOW -->
            <div class="flow-column">
                <div class="flow-title-header">CUSTOMER SERVICE LINE</div>
                
                <svg width="950" height="2300" viewBox="0 0 1000 2300">
                    <!-- Start -->
                    <ellipse class="start-end clickable" cx="450" cy="40" rx="140" ry="30"/>
                    <text class="label-text-white" x="450" y="48">Incoming Call - Customer Service</text>
                    
                    <!-- Connector -->
                    <line class="connector-line" x1="450" y1="70" x2="450" y2="120"/>
                    <polygon class="arrow" points="450,120 445,110 455,110"/>
                    
                    <!-- Emergency Broadcast Check -->
                    <rect class="process-teal clickable" x="350" y="120" width="200" height="60" rx="8"/>
                    <text class="label-text" x="450" y="145">Emergency Broadcast</text>
                    <text class="label-text" x="450" y="162">Rules: PIN-enabled</text>
                    <text class="label-text-small" x="450" y="175">(on/off toggle)</text>
                    
                    <!-- Connector -->
                    <line class="connector-line" x1="450" y1="180" x2="450" y2="230"/>
                    <polygon class="arrow" points="450,230 445,220 455,220"/>
                    
                    <!-- Side note -->
                    <path class="callout" d="M 570 125 L 730 125 L 730 185 L 580 185 L 570 155 Z"/>
                    <text class="label-text-small" x="650" y="145">Catch-all for all unused</text>
                    <text class="label-text-small" x="650" y="160">800 numbers. Checks</text>
                    <text class="label-text-small" x="650" y="175">Emergency ON/OFF</text>
                    
                    <!-- Holiday Check -->
                    <polygon class="decision clickable" points="450,230 540,285 450,340 360,285"/>
                    <text class="label-text-white" x="450" y="280">Holiday?</text>
                    <text class="label-text-white" x="450" y="295">(Configured)</text>
                    
                    <!-- Yes path - Route FAR LEFT -->
                    <line class="connector-line" x1="360" y1="285" x2="180" y2="285"/>
                    <text class="decision-label" x="270" y="280">Yes</text>
                    <line class="connector-line" x1="180" y1="285" x2="180" y2="390"/>
                    <polygon class="arrow" points="180,390 175,380 185,380"/>
                    
                    <rect class="process-beige clickable" x="80" y="390" width="200" height="60" rx="8"/>
                    <text class="label-text" x="180" y="415">Play Holiday</text>
                    <text class="label-text" x="180" y="432">Greeting Message</text>
                    
                    <line class="connector-line" x1="180" y1="450" x2="180" y2="510"/>
                    <polygon class="arrow" points="180,510 175,500 185,500"/>
                    
                    <rect class="process-pink clickable" x="80" y="510" width="200" height="50" rx="8"/>
                    <text class="label-text" x="180" y="540">Voicemail Queue</text>
                    
                    <!-- Route down LEFT edge at x=30 -->
                    <line class="connector-line" x1="180" y1="560" x2="180" y2="610"/>
                    <line class="connector-line" x1="180" y1="610" x2="30" y2="610"/>
                    <line class="connector-line" x1="30" y1="610" x2="30" y2="2100"/>
                    <line class="connector-line" x1="30" y1="2100" x2="450" y2="2100"/>
                    
                    <!-- No path - Route FAR RIGHT -->
                    <line class="connector-line" x1="540" y1="285" x2="720" y2="285"/>
                    <text class="decision-label" x="630" y="280">No</text>
                    <line class="connector-line" x1="720" y1="285" x2="720" y2="390"/>
                    <polygon class="arrow" points="720,390 715,380 725,380"/>
                    
                    <!-- Business Hours Check -->
                    <polygon class="decision clickable" points="720,390 810,445 720,500 630,445"/>
                    <text class="label-text-white" x="720" y="440">8 AM - 7 PM</text>
                    <text class="label-text-white" x="720" y="455">Eastern?</text>
                    
                    <!-- No path from Hours - After hours - Route FAR RIGHT edge -->
                    <line class="connector-line" x1="810" y1="445" x2="870" y2="445"/>
                    <text class="decision-label" x="840" y="440">No</text>
                    <line class="connector-line" x1="870" y1="445" x2="870" y2="580"/>
                    <polygon class="arrow" points="870,580 865,570 875,570"/>
                    
                    <rect class="process-beige clickable" x="770" y="580" width="200" height="60" rx="8"/>
                    <text class="label-text" x="870" y="605">Play After Hours</text>
                    <text class="label-text" x="870" y="622">Message (Night)</text>
                    
                    <line class="connector-line" x1="870" y1="640" x2="870" y2="700"/>
                    <polygon class="arrow" points="870,700 865,690 875,690"/>
                    
                    <rect class="process-pink clickable" x="770" y="700" width="200" height="50" rx="8"/>
                    <text class="label-text" x="870" y="730">Voicemail Queue</text>
                    
                    <!-- Continue down FAR RIGHT edge -->
                    <line class="connector-line" x1="870" y1="750" x2="870" y2="2110"/>
                    <line class="connector-line" x1="870" y1="2110" x2="450" y2="2110"/>
                    
                    <!-- Yes path to IVR Menu - Route back CENTER -->
                    <line class="connector-line" x1="630" y1="445" x2="450" y2="445"/>
                    <text class="decision-label" x="540" y="440">Yes</text>
                    <line class="connector-line" x1="450" y1="445" x2="450" y2="600"/>
                    <polygon class="arrow" points="450,600 445,590 455,590"/>
                    
                    <!-- IVR Menu - CENTER -->
                    <rect class="process-green clickable" x="330" y="600" width="240" height="100" rx="8"/>
                    <text class="label-text" x="450" y="630" style="font-weight: bold;">IVR Menu (3 retries)</text>
                    <text class="label-text-small" x="450" y="652">Press 1 for Finance</text>
                    <text class="label-text-small" x="450" y="667">Press 2 for Place an Order</text>
                    <text class="label-text-small" x="450" y="682">Press 3 for Questions</text>
                    
                    <line class="connector-line" x1="450" y1="700" x2="450" y2="760"/>
                    <polygon class="arrow" points="450,760 445,750 455,750"/>
                    
                    <!-- Selection routing - CENTER -->
                    <rect class="process-teal clickable" x="350" y="760" width="200" height="60" rx="8"/>
                    <text class="label-text" x="450" y="785">Route based on</text>
                    <text class="label-text" x="450" y="802">caller selection</text>
                    
                    <!-- Three branches with clear separation -->
                    <line class="connector-line" x1="350" y1="820" x2="180" y2="890"/>
                    <line class="connector-line" x1="450" y1="820" x2="450" y2="890"/>
                    <line class="connector-line" x1="550" y1="820" x2="720" y2="890"/>
                    
                    <text class="decision-label" x="265" y="855">Press 1</text>
                    <text class="decision-label" x="450" y="855">Press 2</text>
                    <text class="decision-label" x="635" y="855">Press 3</text>
                    
                    <polygon class="arrow" points="180,890 175,880 185,880"/>
                    <polygon class="arrow" points="450,890 445,880 455,880"/>
                    <polygon class="arrow" points="720,890 715,880 725,880"/>
                    
                    <!-- Press 1 - Finance - LEFT -->
                    <rect class="process-teal clickable" x="80" y="890" width="200" height="70" rx="8"/>
                    <text class="label-text-small" x="180" y="915">Finance Queue</text>
                    <text class="label-text-small" x="180" y="932">(Transfer to</text>
                    <text class="label-text-small" x="180" y="947">Finance line)</text>
                    
                    <line class="connector-line" x1="180" y1="960" x2="180" y2="1030"/>
                    <polygon class="arrow" points="180,1030 175,1020 185,1020"/>
                    
                    <ellipse class="process-purple clickable" cx="180" cy="1075" rx="90" ry="40"/>
                    <text class="label-text-small" x="180" y="1073">Finance Agent</text>
                    <text class="label-text-small" x="180" y="1090">+ NetSuite</text>
                    
                    <!-- Route to LEFT edge at x=30 -->
                    <line class="connector-line" x1="180" y1="1115" x2="180" y2="1165"/>
                    <line class="connector-line" x1="180" y1="1165" x2="30" y2="1165"/>
                    <line class="connector-line" x1="30" y1="1165" x2="30" y2="1780"/>
                    <line class="connector-line" x1="30" y1="1780" x2="450" y2="1780"/>
                    
                    <!-- Press 2 - Place Order - CENTER -->
                    <rect class="process-teal clickable" x="350" y="890" width="200" height="80" rx="8"/>
                    <text class="label-text-small" x="450" y="915">CS Place Order</text>
                    <text class="label-text-small" x="450" y="932">Queue</text>
                    <text class="label-text-small" x="450" y="952" style="font-style: italic;">(Newer agents,</text>
                    <text class="label-text-small" x="450" y="965" style="font-style: italic;">easier calls)</text>
                    
                    <line class="connector-line" x1="450" y1="970" x2="450" y2="1040"/>
                    <polygon class="arrow" points="450,1040 445,1030 455,1030"/>
                    
                    <ellipse class="process-purple clickable" cx="450" cy="1085" rx="90" ry="40"/>
                    <text class="label-text-small" x="450" y="1083">CS Agent (Order)</text>
                    <text class="label-text-small" x="450" y="1100">+ NetSuite</text>
                    
                    <!-- Continue down CENTER -->
                    <line class="connector-line" x1="450" y1="1125" x2="450" y2="1780"/>
                    
                    <!-- Press 3 - Questions - RIGHT -->
                    <rect class="process-teal clickable" x="620" y="890" width="200" height="80" rx="8"/>
                    <text class="label-text-small" x="720" y="915">CS Questions</text>
                    <text class="label-text-small" x="720" y="932">Queue</text>
                    <text class="label-text-small" x="720" y="952" style="font-style: italic;">(Experienced</text>
                    <text class="label-text-small" x="720" y="965" style="font-style: italic;">agents)</text>
                    
                    <line class="connector-line" x1="720" y1="970" x2="720" y2="1040"/>
                    <polygon class="arrow" points="720,1040 715,1030 725,1030"/>
                    
                    <ellipse class="process-purple clickable" cx="720" cy="1085" rx="90" ry="40"/>
                    <text class="label-text-small" x="720" y="1083">CS Agent (Quest)</text>
                    <text class="label-text-small" x="720" y="1100">+ NetSuite</text>
                    
                    <!-- Route to edge at x=850 then back -->
                    <line class="connector-line" x1="720" y1="1125" x2="720" y2="1175"/>
                    <line class="connector-line" x1="720" y1="1175" x2="850" y2="1175"/>
                    <line class="connector-line" x1="850" y1="1175" x2="850" y2="1780"/>
                    <line class="connector-line" x1="850" y1="1780" x2="450" y2="1780"/>
                    
                    <!-- All paths converge at CENTER -->
                    <polygon class="arrow" points="450,1780 445,1770 455,1770"/>
                    
                    <!-- NetSuite Process (All Paths) - CENTER -->
                    <rect class="process-green clickable" x="330" y="1780" width="240" height="90" rx="8"/>
                    <text class="label-text" x="450" y="1810" style="font-weight: bold;">NetSuite Integration</text>
                    <text class="label-text-small" x="450" y="1830">ANI lookup in Customer/Contact</text>
                    <text class="label-text-small" x="450" y="1845">Auto-pop if single match OR</text>
                    <text class="label-text-small" x="450" y="1860">Show hyperlinks for multiple matches</text>
                    
                    <line class="connector-line" x1="450" y1="1870" x2="450" y2="1930"/>
                    <polygon class="arrow" points="450,1930 445,1920 455,1920"/>
                    
                    <!-- Call Logging - CENTER -->
                    <rect class="process-teal clickable" x="330" y="1930" width="240" height="100" rx="8"/>
                    <text class="label-text" x="450" y="1958" style="font-weight: bold;">Log Phone Call Activity</text>
                    <text class="label-text" x="450" y="1978">to NetSuite</text>
                    <text class="label-text-small" x="450" y="1998">â€¢ Agent, duration, selection info</text>
                    <text class="label-text-small" x="450" y="2013">â€¢ Disposition code, ACW time</text>
                    <text class="label-text-small" x="450" y="2028">â€¢ Transcript & AI summary</text>
                    
                    <line class="connector-line" x1="450" y1="2030" x2="450" y2="2100"/>
                    
                    <!-- End -->
                    <ellipse class="start-end" cx="450" cy="2150" rx="80" ry="30"/>
                    <text class="label-text-white" x="450" y="2158">Finish</text>
                    
                    <!-- Queue Features Note -->
                    <rect class="callout" x="80" y="1250" width="740" height="130" rx="8"/>
                    <text class="label-text" x="450" y="1278" style="font-weight: bold;">Queue Features (All Queues):</text>
                    <text class="label-text-small" x="450" y="1300">â€¢ 18 seconds initial music on hold</text>
                    <text class="label-text-small" x="450" y="1315">â€¢ Periodic announcements every 30 seconds</text>
                    <text class="label-text-small" x="450" y="1330">â€¢ Option to Press 1 for voicemail at intervals</text>
                    <text class="label-text-small" x="450" y="1345">â€¢ 5-minute maximum queue time (configurable)</text>
                    <text class="label-text-small" x="450" y="1360">â€¢ Invalid/timeout after 3 retries â†’ routes to CS Questions Queue</text>
                    
                    <!-- NetSuite Integration Details -->
                    <rect class="callout" x="80" y="1420" width="740" height="110" rx="8"/>
                    <text class="label-text" x="450" y="1448" style="font-weight: bold;">NetSuite Integration Process:</text>
                    <text class="label-text-small" x="450" y="1468">Automatic ANI lookup â†’ Single match: Auto-pop | Multiple: Hyperlinks</text>
                    <text class="label-text-small" x="450" y="1483">IVR selection displayed to agent (e.g., "CS Place Order" or "CS Questions")</text>
                    <text class="label-text-small" x="450" y="1498">Call logged with: Agent, duration, ACW, disposition, transcript & AI summary</text>
                    <text class="label-text-small" x="450" y="1513">OAuth2 authentication (30-day refresh) or Boomi integration</text>
                </svg>
            </div>
        </div>
    </div>
    
    <!-- Modal for displaying module information -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Module Information</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be dynamically inserted -->
            </div>
        </div>
    
    <script>
        // Module information database
        const moduleInfo = {
            'incoming-call-finance': {
                title: 'Incoming Call - Finance Line',
                description: 'Entry point for all calls to the Finance department phone number.',
                details: [
                    'Direct line for billing, invoicing, and payment inquiries',
                    'Operates 8 AM - 5 PM Eastern Time',
                    'All calls enter through this point before routing'
                ]
            },
            'incoming-call-cs': {
                title: 'Incoming Call - Customer Service Line',
                description: 'Entry point for all calls to Customer Service. This is a catch-all number that handles all unused 800 numbers.',
                details: [
                    'Main customer support line',
                    'Operates 8 AM - 7 PM Eastern Time (extended hours)',
                    'Routes to multiple queue options based on caller needs',
                    'Handles legacy number redirects'
                ]
            },
            'emergency-broadcast': {
                title: 'Emergency Broadcast Check',
                description: 'Checks if an emergency broadcast message is enabled. This is a toggleable feature controlled by PIN-protected internal number.',
                details: [
                    'Can be turned ON/OFF remotely via internal dial-in',
                    'Used for urgent company-wide announcements',
                    'Examples: Weather emergencies, system outages, office closures',
                    'If enabled, plays message then continues normal routing'
                ]
            },
            'holiday-check': {
                title: 'Holiday Schedule Check',
                description: 'Determines if the current date is a configured company holiday.',
                details: [
                    'Configured holidays: New Year\'s Day, MLK Day, Good Friday, Memorial Day, Independence Day, Labor Day, Thanksgiving, Day After Thanksgiving, Christmas Eve, Christmas Day',
                    'If holiday detected, plays holiday greeting and routes to voicemail',
                    'Holidays configurable in Five9 admin portal',
                    'Automatic calendar year handling'
                ]
            },
            'temp-close': {
                title: 'Temporary Close Check',
                description: 'Checks if a temporary closure message is active during business hours.',
                details: [
                    'Used for company meetings (e.g., twice monthly 11:30 AM - 12:00 PM meetings)',
                    'Customer service week events',
                    'One-off closures during normal business hours',
                    'Message is customizable via text-to-speech',
                    'Routes calls to voicemail when active'
                ]
            },
            'business-hours': {
                title: 'Business Hours Check',
                description: 'Verifies if the call is within operating hours for the specific line.',
                details: [
                    '<strong>Finance Line:</strong> 8:00 AM - 5:00 PM Eastern Time',
                    '<strong>Customer Service Line:</strong> 8:00 AM - 7:00 PM Eastern Time',
                    'If within hours: Routes to queue or IVR menu',
                    'If after hours: Plays night message and routes to voicemail',
                    'Time zone: Eastern Time (ET)'
                ]
            },
            'finance-queue': {
                title: 'Finance Queue',
                description: 'Holds callers until a Finance agent is available to take the call.',
                details: [
                    'Plays music on hold for initial 18 seconds',
                    'Periodic announcements every 30 seconds',
                    'Callers can press 1 to leave voicemail at any time',
                    'Maximum queue time: 5 minutes (configurable)',
                    'NetSuite lookup happens when call connects to agent'
                ]
            },
            'cs-queue-order': {
                title: 'Customer Service - Place Order Queue',
                description: 'Queue for customers calling to place product orders.',
                details: [
                    'Staffed by newer agents and all CS team members',
                    'Simpler calls requiring less product knowledge',
                    'Caller pressed 2 in IVR menu',
                    'Agent sees "CS Place Order" selection indicator',
                    'Music on hold with periodic announcements',
                    'Press 1 for voicemail option available'
                ]
            },
            'cs-queue-questions': {
                title: 'Customer Service - Questions Queue',
                description: 'Queue for customers with questions about existing orders or requiring detailed support.',
                details: [
                    'Staffed by experienced agents only',
                    'Complex inquiries: order status, technical issues, problem resolution',
                    'Caller pressed 3 in IVR menu',
                    'Agent sees "CS Questions" selection indicator',
                    'Requires deeper product/system knowledge',
                    'Error/timeout calls route here after 3 invalid attempts'
                ]
            },
            'ivr-menu': {
                title: 'IVR Menu - Customer Service',
                description: 'Interactive voice menu allowing callers to self-select their routing destination.',
                details: [
                    '<strong>Press 1:</strong> Transfer to Finance department',
                    '<strong>Press 2:</strong> Place an order (CS Place Order Queue)',
                    '<strong>Press 3:</strong> Questions about orders (CS Questions Queue)',
                    '3 retry attempts for invalid/no input',
                    'After 3 failed attempts: Routes to CS Questions Queue',
                    '10-second timeout per prompt',
                    'Selection info passed to agent for context'
                ]
            },
            'netsuite-lookup': {
                title: 'NetSuite ANI Lookup',
                description: 'Automatic phone number lookup in NetSuite to identify the caller and retrieve their account information.',
                details: [
                    'Searches caller\'s phone number (ANI) in NetSuite',
                    'Searches both Customer and Contact records',
                    'Happens immediately when call connects to agent',
                    'Five9 Adapter displays results in agent browser',
                    'Lookup occurs while agent greeting plays'
                ]
            },
            'netsuite-decision': {
                title: 'NetSuite Match Decision',
                description: 'Determines how to handle NetSuite lookup results based on number of matches found.',
                details: [
                    '<strong>Single Match:</strong> Automatically pops customer record in NetSuite',
                    '<strong>Multiple Matches:</strong> Displays hyperlink list for agent to select',
                    '<strong>No Match:</strong> Agent manually searches or creates new record',
                    'Prevents incorrect record assignment',
                    'Agent has full control over final selection'
                ]
            },
            'screen-pop': {
                title: 'Auto-Pop Customer Record',
                description: 'Automatically opens the matched customer record in NetSuite browser.',
                details: [
                    'Opens customer record in new browser tab',
                    'Displays full customer information',
                    'Shows order history, contact details, notes',
                    'Agent can immediately see account status',
                    'Happens within 1-2 seconds of call connection'
                ]
            },
            'hyperlinks': {
                title: 'Multiple Match Hyperlinks',
                description: 'Displays a list of clickable hyperlinks when multiple customers share the same phone number.',
                details: [
                    'Shows in Five9 Adapter panel',
                    'Lists all matching customer names',
                    'Agent clicks correct customer to open record',
                    'Prevents calling up wrong account',
                    'Common for business lines with multiple contacts'
                ]
            },
            'agent-connection': {
                title: 'Connect to Agent',
                description: 'Call is connected to available agent with Five9 Adapter active and NetSuite integration ready.',
                details: [
                    'Agent receives call notification',
                    'Five9 Adapter panel displays in browser',
                    'NetSuite lookup completed',
                    'Call selection info visible (Finance/Order/Questions)',
                    'Agent can see caller information before answering',
                    'Softphone interface active for call control'
                ]
            },
            'call-logging': {
                title: 'Log Phone Call Activity',
                description: 'Automatically creates a Phone Call Activity record in NetSuite with comprehensive call information.',
                details: [
                    '<strong>Call Details:</strong> Agent name, call duration, timestamp',
                    '<strong>After-Call Work (ACW):</strong> Time spent on post-call tasks',
                    '<strong>Disposition:</strong> Five9 disposition code selected by agent',
                    '<strong>Selection Info:</strong> Which queue/option caller selected',
                    '<strong>AI Features:</strong> Call transcript and AI-generated summary',
                    'Record created within 30 seconds - 5 minutes after call ends',
                    'Requires OAuth2 connection (30-day refresh cycle)'
                ]
            },
            'voicemail': {
                title: 'Voicemail Queue',
                description: 'Allows callers to leave a message when agents are unavailable or during closed hours.',
                details: [
                    'Activated during holidays, after hours, or temporary closures',
                    'Callers can press 1 while in queue to leave voicemail',
                    'Messages stored in Five9 system',
                    'Agents retrieve messages using "Ready All" status',
                    'Voicemail treated as a queue that agents pull from',
                    'Messages playable from Five9 interface'
                ]
            },
            'holiday-greeting': {
                title: 'Holiday Greeting Message',
                description: 'Plays a pre-recorded message informing caller that the office is closed for a holiday.',
                details: [
                    'Example: "Thank you for calling. Our office is closed today for [Holiday Name]"',
                    'States next business day',
                    'Directs caller to leave voicemail',
                    'Can use text-to-speech or professional recording',
                    'Different messages for different holidays possible'
                ]
            },
            'night-message': {
                title: 'After Hours / Night Message',
                description: 'Plays a message informing callers that they\'ve reached outside business hours.',
                details: [
                    'States current business hours',
                    'Example: "Our office is open Monday-Friday, 8 AM to 5 PM Eastern Time"',
                    'Offers voicemail option',
                    'May include emergency contact information if needed',
                    'Can be customized per department'
                ]
            },
            'netsuite-integration': {
                title: 'NetSuite Integration Process',
                description: 'Complete integration between Five9 and NetSuite for screen pop and call logging.',
                details: [
                    '<strong>Components:</strong> Five9 Adapter (browser extension), NetSuite Package',
                    '<strong>Authentication:</strong> OAuth2 (requires refresh every 30 days)',
                    '<strong>Lookup Process:</strong> ANI match against Customer & Contact records',
                    '<strong>Screen Pop:</strong> Auto-open records or display selection list',
                    '<strong>Call Logging:</strong> Automatic Phone Call Activity creation',
                    '<strong>Custom Fields:</strong> Agent, duration, disposition, ACW, selection',
                    '<strong>AI Features:</strong> Transcript and summary via API',
                    'Alternative: Use Boomi for machine-to-machine OAuth handling'
                ]
            },
            'finance-agent-netsuite': {
                title: 'Finance Agent + NetSuite',
                description: 'Finance department agent receives the call with full NetSuite integration active.',
                details: [
                    'Agent staffed in Finance Queue',
                    'Five9 Adapter panel displays in browser',
                    'NetSuite ANI lookup automatically performed',
                    'Customer record screen-popped (if single match)',
                    'Multiple match hyperlinks displayed (if applicable)',
                    'Agent can see caller came through Finance line',
                    'Call logging happens automatically after call ends',
                    'Agent has access to disposition codes',
                    'Softphone controls active for call handling'
                ]
            },
            'cs-agent-netsuite': {
                title: 'CS Agent (Queue) + NetSuite',
                description: 'Customer Service agent receives the call with NetSuite integration and queue context.',
                details: [
                    'Agent staffed in appropriate CS Queue (Place Order or Questions)',
                    'Five9 Adapter panel displays in browser',
                    'NetSuite ANI lookup automatically performed',
                    'Customer record screen-popped (if single match)',
                    'Agent can see which option caller selected (Press 2 or Press 3)',
                    '<strong>Place Order Queue:</strong> Staffed by all CS agents',
                    '<strong>Questions Queue:</strong> Staffed by experienced agents only',
                    'Call logging happens automatically after call ends',
                    'Selection info (Order/Questions) visible to agent for context'
                ]
            }
        };
        
        // Get modal elements
        const modal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const closeBtn = document.getElementsByClassName('close')[0];
        
        // Function to show modal with module information
        function showModuleInfo(moduleId) {
            const info = moduleInfo[moduleId];
            if (!info) {
                console.log('No info found for:', moduleId);
                return;
            }
            
            modalTitle.textContent = info.title;
            
            let bodyHTML = `<p><strong>${info.description}</strong></p>`;
            
            if (info.details && info.details.length > 0) {
                bodyHTML += '<div class="info-badge">';
                bodyHTML += '<strong>Key Details:</strong>';
                bodyHTML += '<ul>';
                info.details.forEach(detail => {
                    bodyHTML += `<li>${detail}</li>`;
                });
                bodyHTML += '</ul>';
                bodyHTML += '</div>';
            }
            
            modalBody.innerHTML = bodyHTML;
            modal.style.display = 'block';
        }
        
        // Close modal when clicking X
        closeBtn.onclick = function() {
            modal.style.display = 'none';
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && modal.style.display === 'block') {
                modal.style.display = 'none';
            }
        });
        
        // Make SVG elements clickable
        document.addEventListener('DOMContentLoaded', function() {
            const svgElements = document.querySelectorAll('svg rect.clickable, svg ellipse.clickable, svg polygon.clickable');
            
            svgElements.forEach(element => {
                element.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const moduleId = determineModuleType(element);
                    if (moduleId) {
                        showModuleInfo(moduleId);
                    }
                });
            });
        });
        
        // Determine module type based on element attributes and siblings
        function determineModuleType(element) {
            let currentElement = element.nextElementSibling;
            let textContent = '';
            
            for (let i = 0; i < 5 && currentElement; i++) {
                if (currentElement.tagName === 'text') {
                    textContent += ' ' + currentElement.textContent.toLowerCase();
                }
                currentElement = currentElement.nextElementSibling;
            }
            
            if (textContent.includes('incoming') && textContent.includes('finance')) return 'incoming-call-finance';
            if (textContent.includes('incoming') && textContent.includes('customer service')) return 'incoming-call-cs';
            if (textContent.includes('emergency broadcast')) return 'emergency-broadcast';
            if (textContent.includes('holiday')) {
                if (textContent.includes('greeting') || textContent.includes('message')) return 'holiday-greeting';
                return 'holiday-check';
            }
            if (textContent.includes('temporary close') || textContent.includes('temp')) return 'temp-close';
            if (textContent.includes('8 am') || textContent.includes('eastern')) return 'business-hours';
            if (textContent.includes('finance agent') && textContent.includes('netsuite')) return 'finance-agent-netsuite';
            if (textContent.includes('cs agent') && textContent.includes('netsuite')) return 'cs-agent-netsuite';
            if (textContent.includes('finance queue')) return 'finance-queue';
            if (textContent.includes('place order')) return 'cs-queue-order';
            if (textContent.includes('cs questions') || textContent.includes('questions')) return 'cs-queue-questions';
            if (textContent.includes('ivr menu')) return 'ivr-menu';
            if (textContent.includes('netsuite ani lookup') || textContent.includes('netsuite lookup')) return 'netsuite-lookup';
            if (textContent.includes('single match')) return 'netsuite-decision';
            if (textContent.includes('auto-pop customer')) return 'screen-pop';
            if (textContent.includes('hyperlink')) return 'hyperlinks';
            if (textContent.includes('connect to') && textContent.includes('agent')) return 'agent-connection';
            if (textContent.includes('log phone call') || textContent.includes('log call')) return 'call-logging';
            if (textContent.includes('voicemail')) return 'voicemail';
            if (textContent.includes('night message') || textContent.includes('after hours')) return 'night-message';
            if (textContent.includes('netsuite integration')) return 'netsuite-integration';
            
            return null;
        }
    </script>
</body>
</html>
